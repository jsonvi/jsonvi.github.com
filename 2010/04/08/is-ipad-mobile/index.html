<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7 ]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <meta name="description" content="JavaScript Ninja">
    <meta name="author" content="jsonvi" />

    <!-- Mobile viewport optimized -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CSS: implied media="all" -->
    <link rel="stylesheet" href="/css/default.css?v=2.1">
    <script src="/js/libs/modernizr-1.7.min.js"></script>
    <title>ipad mobile? 是手机? 不...</title>
  </head>


  <body>
    <header id="banner" role="banner">
        <h1><a id="logo" href="/" title="JSONVI - JavaScript Ninja">JSONVI - JavaScript Ninja</a></h1>
        <nav role="navigation">
            <ul>
                    <li class="current"><a href="/">Blog</a></li>
                    <li><a href="/about.html">About</a></li>
            </ul>
        </nav>
    </header>
        
    <div id="main" role="main">
<article class="post single">
            <header>
                <h1><a href="/2010/04/08/is-ipad-mobile" rel="bookmark">ipad mobile? 是手机? 不...</a></h1>
                <time datetime="Thu Apr 08 00:00:00 +0800 2010" pubdate="">04/08/2010</time>|
                    <a class="tags" title="Tag:javascript" href="/tags/javascript">javascript, </a> <a class="tags" title="Tag:browser" href="/tags/browser">browser, </a> <a class="tags" title="Tag:html5" href="/tags/html5">html5</a> 
            </header>
            <p>使用UA string 判断 浏览器 是jquery的御用方法</p>

<!-- end_preview -->




<div class="highlight"><pre><code class="javascript"><span class="nx">uaMatch</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">browser</span><span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">};</span>

  <span class="nx">ua</span> <span class="o">=</span> <span class="nx">ua</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span> <span class="sr">/webkit/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">ret</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">browser</span><span class="o">:</span> <span class="s2">&quot;webkit&quot;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="sr">/webkit[\/ ]([\w.]+)/</span> <span class="p">};</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="sr">/opera/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">ret</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">browser</span><span class="o">:</span> <span class="s2">&quot;opera&quot;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span>  <span class="sr">/version/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="o">?</span> <span class="sr">/version[\/ ]([\w.]+)/</span> <span class="o">:</span> <span class="sr">/opera[\/ ]([\w.]+)/</span> <span class="p">};</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="sr">/msie/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">ret</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">browser</span><span class="o">:</span> <span class="s2">&quot;msie&quot;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="sr">/msie ([\w.]+)/</span> <span class="p">};</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="sr">/mozilla/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span> <span class="o">!</span><span class="sr">/compatible/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">ret</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">browser</span><span class="o">:</span> <span class="s2">&quot;mozilla&quot;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="sr">/rv:([\w.]+)/</span> <span class="p">};</span>
  <span class="p">}</span>

  <span class="nx">ret</span><span class="p">.</span><span class="nx">version</span> <span class="o">=</span> <span class="p">(</span><span class="nx">ret</span><span class="p">.</span><span class="nx">version</span> <span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span><span class="o">&amp;</span><span class="nx">amp</span><span class="p">;</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">version</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">])[</span><span class="mi">1</span><span class="p">];</span>

  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>


<p>这方法很方便，也很脆弱，不信的话，可以看看我们亲爱的ipad...</p>

<p>随着ipad的出现，浏览网页的方式似乎出现了新的路，介于手机与电脑之间的，给人一种“特仑苏”的感觉，尤其是当你看到了ipad的UA string 时</p>

<p><code>
Mozilla/5.0 (iPad; U; CPU OS 3_2 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Version/4.0.4 Mobile/7B334b Safari/531.21.10
</code></p>

<p>请注意后面的Mobile字样！！！</p>

<blockquote>是手机吗？不...
是ipad，不是所有移动设备都叫ipad</blockquote>


<p>诚然，一句</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/iPad/i</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span>
</code></pre>
</div>


<p>可以解决问题</p>

<p>但是，那些判断UA string 为mobile的网站呢？
不妨想象一下，那些使用着“大屏幕”的ipad用户访问 www.某网站.com ，却被直接转到针对手机设计的 m.某网站.com 时的心情...</p>

<p>没有标准的useragent ， 在如今的web海域中，还要漂泊多久？</p>

            <footer role="contentinfo">
                【 本文由 <a href="http://jsonvi.com/" title="jsonvi">jsonvi</a> 发表，未经许可请勿转载。商业或非商业使用请 <a target="_blank" href="mailto:jsonvi@gmail.com">联系作者</a> 】
            </footer>



    <!-- disqus start -->
    <div id="disqus-wrap">
     <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jsonvi'; // required: replace example with your forum shortname

        // The following are highly recommended additional parameters. Remove the slashes in front to use.
        // var disqus_identifier = 'unique_dynamic_id_1234';
        // var disqus_url = 'http://example.com/permalink-to-page.html';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </div>
    <!--[if lt IE 7 ]>  
        <p style="margin-top:20px;">
        评论功能不对IE6用户开放,敬请谅解,何不升级到最新版的浏览器呢?:) 
        </p>
    <![endif]-->
      
    <!-- disqus end -->

</article>
</div>


    <footer id="content-info" role="contentinfo">
        <p>Copyright © 2011 <a href="http://jsonvi.com/" title="jsonvi">jsonvi</a>. All rights reserved. </p>
    </footer>

  </body>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23297986-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</html>
